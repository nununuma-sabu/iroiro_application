# Food Ticket System (é£Ÿåˆ¸æ©Ÿã‚·ã‚¹ãƒ†ãƒ )

é£²é£Ÿåº—å‘ã‘ã®ãƒ‡ã‚¸ã‚¿ãƒ«é£Ÿåˆ¸æ©Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€‚é¡§å®¢å‘ã‘ã®æ³¨æ–‡ç”»é¢ã¨ã€ç®¡ç†è€…å‘ã‘ã®å•†å“ãƒ»åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã‚’å‚™ãˆãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ©Ÿèƒ½æ¦‚è¦](#æ©Ÿèƒ½æ¦‚è¦)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ä½¿ã„æ–¹](#ä½¿ã„æ–¹)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ)
- [é–‹ç™ºå±¥æ­´](#é–‹ç™ºå±¥æ­´)
- [APIä»•æ§˜](#apiä»•æ§˜)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ)
- [é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰](#é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- [ä»Šå¾Œã®é–‹ç™ºäºˆå®š](#ä»Šå¾Œã®é–‹ç™ºäºˆå®š)

---

## ğŸ¯ æ©Ÿèƒ½æ¦‚è¦

### é¡§å®¢å‘ã‘æ©Ÿèƒ½
- âœ… **åº—èˆ—ãƒ­ã‚°ã‚¤ãƒ³** - åº—èˆ—IDã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼
- âœ… **é¡”èªè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** - é¡§å®¢å±æ€§ï¼ˆå¹´é½¢å±¤ãƒ»æ€§åˆ¥ï¼‰ã®è‡ªå‹•æ¤œå‡º
- âœ… **æ‰‹å‹•å±æ€§å…¥åŠ›** - é¡”èªè¨¼ã‚¹ã‚­ãƒƒãƒ—æ™‚ã®æ‰‹å‹•å…¥åŠ›
- âœ… **å•†å“é–²è¦§** - ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å•†å“è¡¨ç¤ºï¼ˆå‹•çš„ã‚«ãƒ†ã‚´ãƒªå¯¾å¿œï¼‰
- âœ… **ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½** - å•†å“ã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»æ•°é‡å¤‰æ›´
- âœ… **æ³¨æ–‡ç¢ºå®š** - åœ¨åº«ã®è‡ªå‹•æ¸›å°‘ã€æ³¨æ–‡å±¥æ­´ã®ä¿å­˜

### ç®¡ç†è€…å‘ã‘æ©Ÿèƒ½
- âœ… **ã‚«ãƒ†ã‚´ãƒªç®¡ç†** - ã‚«ãƒ†ã‚´ãƒªã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼ˆCRUDæ“ä½œï¼‰
- âœ… **å•†å“ç®¡ç†** - å•†å“ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼ˆCRUDæ“ä½œï¼‰
- âœ… **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰** - å•†å“ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- âœ… **ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼** - ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å•†å“çµã‚Šè¾¼ã¿
- âœ… **åˆæœŸåœ¨åº«è¨­å®š** - å•†å“ç™»éŒ²æ™‚ã«åœ¨åº«æ•°ã‚‚åŒæ™‚è¨­å®š
- ğŸš§ **åœ¨åº«ç®¡ç†** - ï¼ˆæœªå®Ÿè£…ï¼‰åœ¨åº«ã®ä¸€æ‹¬ç®¡ç†ãƒ»è²©å£²çŠ¶æ…‹ã®åˆ‡ã‚Šæ›¿ãˆ
- ğŸš§ **å£²ä¸Šåˆ†æ** - ï¼ˆæœªå®Ÿè£…ï¼‰å£²ä¸Šã‚°ãƒ©ãƒ•ãƒ»äººæ°—å•†å“ãƒ©ãƒ³ã‚­ãƒ³ã‚°

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Python 3.10+**
- **FastAPI** - é«˜é€ŸãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **SQLAlchemy** - ORMï¼ˆObject-Relational Mappingï¼‰
- **SQLite** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Passlib** - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
- **python-multipart** - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾å¿œ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 18** + **TypeScript**
- **Vite** - é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **React Router** - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **Axios** - HTTPé€šä¿¡
- **Tailwind CSS** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ
- Python 3.10ä»¥ä¸Š
- Node.js 18ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/nununuma-sabu/iroiro_application.git
cd iroiro_application/food_ticket
```

### 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
cd backend

# ä»®æƒ³ç’°å¢ƒã®ä½œæˆï¼ˆæ¨å¥¨ï¼‰
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ
python -m scripts.create_db

# åˆæœŸãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
python -m scripts.seed

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
uvicorn app.main:app --reload
```

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ `http://127.0.0.1:8000` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
cd ../frontend

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

---

## ğŸ“– ä½¿ã„æ–¹

### é¡§å®¢ç”»é¢

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:5173` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã§ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
   - **åº—èˆ—ID**: `1`
   - **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: `password123`
3. é¡”èªè¨¼ç”»é¢ã§ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã€ã¾ãŸã¯ã€Œæ‰‹å‹•ã§å…¥åŠ›ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. å•†å“ã‚’é¸æŠã—ã¦ã‚«ãƒ¼ãƒˆã«è¿½åŠ 
5. ã€Œæ³¨æ–‡ã‚’ç¢ºå®šã™ã‚‹ã€ãƒœã‚¿ãƒ³ã§æ³¨æ–‡å®Œäº†

### ç®¡ç†ç”»é¢

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:5173/admin` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰æ©Ÿèƒ½ã‚’é¸æŠï¼š
   - **ã‚«ãƒ†ã‚´ãƒªç®¡ç†** (`/admin/categories`) - ã‚«ãƒ†ã‚´ãƒªã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
   - **å•†å“ç®¡ç†** (`/admin/products`) - å•†å“ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã€ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

#### ã‚«ãƒ†ã‚´ãƒªç®¡ç†
- æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ 
- æ—¢å­˜ã‚«ãƒ†ã‚´ãƒªã®åå‰ã‚’ç·¨é›†
- ã‚«ãƒ†ã‚´ãƒªã®å‰Šé™¤ï¼ˆå•†å“ãŒç´ä»˜ã„ã¦ã„ãªã„å ´åˆã®ã¿ï¼‰

#### å•†å“ç®¡ç†
- æ–°è¦å•†å“ã®è¿½åŠ ï¼ˆå•†å“åã€ã‚«ãƒ†ã‚´ãƒªã€ä¾¡æ ¼ã€ç”»åƒã€åˆæœŸåœ¨åº«ï¼‰
- å•†å“æƒ…å ±ã®ç·¨é›†
- å•†å“ã®å‰Šé™¤
- ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

---

## ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
food_ticket/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ core/              # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€è¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”‚   â”œâ”€â”€ db/                # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ models.py      # ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ session.py     # DBæ¥ç¶š
â”‚   â”‚   â”œâ”€â”€ routers/           # APIãƒ«ãƒ¼ã‚¿ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ admin.py       # ç®¡ç†ç”»é¢API
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”‚   â””â”€â”€ admin.py       # ç®¡ç†ç”»é¢ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â””â”€â”€ main.py            # FastAPIã‚¢ãƒ—ãƒªæœ¬ä½“
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ create_db.py       # DBä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”‚   â””â”€â”€ seed.py            # åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â””â”€â”€ vending_machine.db     # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”‚
â””â”€â”€ frontend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/               # APIé€šä¿¡
    â”‚   â”‚   â”œâ”€â”€ client.ts      # å…±é€šaxiosã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ admin.ts       # ç®¡ç†ç”»é¢APIé–¢æ•°
    â”‚   â”‚   â”œâ”€â”€ store.ts       # åº—èˆ—APIé–¢æ•°
    â”‚   â”‚   â””â”€â”€ order.ts       # æ³¨æ–‡APIé–¢æ•°
    â”‚   â”œâ”€â”€ components/        # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ admin/
    â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryManager. tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryManager.css
    â”‚   â”‚   â”‚   â”œâ”€â”€ ProductManager.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ ProductManager.css
    â”‚   â”‚   â”œâ”€â”€ LoginScreen.tsx
    â”‚   â”‚   â”œâ”€â”€ FaceRecognitionScreen.tsx
    â”‚   â”‚   â”œâ”€â”€ CustomerAttributeScreen.tsx
    â”‚   â”‚   â””â”€â”€ MenuScreen.tsx
    â”‚   â”œâ”€â”€ pages/             # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ StorePage.tsx  # é¡§å®¢ç”»é¢
    â”‚   â”‚   â””â”€â”€ AdminPage.tsx  # ç®¡ç†ç”»é¢
    â”‚   â”œâ”€â”€ types/             # TypeScriptå‹å®šç¾©
    â”‚   â”‚   â”œâ”€â”€ auth.ts
    â”‚   â”‚   â”œâ”€â”€ store.ts
    â”‚   â”‚   â””â”€â”€ order.ts
    â”‚   â””â”€â”€ App.tsx            # ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”œâ”€â”€ public/
    â”‚   â””â”€â”€ images/            # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒä¿å­˜å…ˆ
    â”œâ”€â”€ package.json
    â””â”€â”€ vite.config.ts
```

---

## ğŸ”„ é–‹ç™ºå±¥æ­´

### 2025-12-28:  ç®¡ç†ç”»é¢ã®å®Ÿè£…

#### Step 1: APIåŸºç›¤ã®å…±é€šåŒ–
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/api/client.ts` ã‚’ä½œæˆã—ã€axioså…±é€šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®Ÿè£…
  - `frontend/src/api/store.ts` ã‚’æ›´æ–°ã—ã€å…±é€šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã‚’è¿½åŠ 

```typescript
// frontend/src/api/client.ts
import axios from 'axios';

export const apiClient = axios.create({
  baseURL: 'http://127.0.0.1:8000',
  headers: {
    'Content-Type': 'application/json',
  },
});
```

#### Step 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ç®¡ç†ç”»é¢API
- **å®Ÿè£…å†…å®¹**
  - `backend/app/schemas/admin.py` ã‚’ä½œæˆï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ»å•†å“ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼‰
  - `backend/app/routers/admin.py` ã‚’ä½œæˆï¼ˆç®¡ç†ç”»é¢APIå®Ÿè£…ï¼‰
  - `backend/app/main.py` ã«ç®¡ç†ç”»é¢ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ç™»éŒ²

- **APIä¸€è¦§**
  - ã‚«ãƒ†ã‚´ãƒªCRUD:  GET/POST/PUT/DELETE `/admin/categories`
  - å•†å“CRUD: GET/POST/PUT/DELETE `/admin/products`
  - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: POST `/admin/upload-image`

#### Step 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¤‰æ›´
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/App.tsx` ã‚’React Routerã§æ›´æ–°
  - `frontend/src/pages/StorePage.tsx` ã‚’ä½œæˆï¼ˆé¡§å®¢å‘ã‘ãƒšãƒ¼ã‚¸ï¼‰
  - `frontend/src/pages/AdminPage. tsx` ã‚’ä½œæˆï¼ˆç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰

```typescript
// App.tsx
<Router>
  <Routes>
    <Route path="/" element={<StorePage />} />
    <Route path="/admin/*" element={<AdminPage />} />
  </Routes>
</Router>
```

#### Step 4: ç®¡ç†ç”»é¢APIé–¢æ•°
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/api/admin.ts` ã‚’ä½œæˆ
  - ã‚«ãƒ†ã‚´ãƒªãƒ»å•†å“ã®CRUDé–¢æ•°ã‚’å®Ÿè£…
  - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–¢æ•°ã‚’å®Ÿè£…

#### Step 5: ã‚«ãƒ†ã‚´ãƒªç®¡ç†ç”»é¢
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/components/admin/CategoryManager.tsx` ã‚’ä½œæˆ
  - ã‚«ãƒ†ã‚´ãƒªä¸€è¦§è¡¨ç¤ºã€è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤æ©Ÿèƒ½ã‚’å®Ÿè£…
  - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†å¯èƒ½ãªUI

#### Step 6: å•†å“ç®¡ç†ç”»é¢
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/components/admin/ProductManager.tsx` ã‚’ä½œæˆ
  - å•†å“ä¸€è¦§è¡¨ç¤ºï¼ˆã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰
  - å•†å“è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤æ©Ÿèƒ½
  - ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
  - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾å¿œ
  - åˆæœŸåœ¨åº«è¨­å®š

#### Step 7: æ³¨æ–‡ç”»é¢ã®æ”¹å–„
- **å®Ÿè£…å†…å®¹**
  - `frontend/src/components/MenuScreen.tsx` ã‚’æ›´æ–°
  - APIã‹ã‚‰å…¨ã‚«ãƒ†ã‚´ãƒªã‚’å‹•çš„ã«å–å¾—
  - å•†å“ãŒãªã„ã‚«ãƒ†ã‚´ãƒªã‚‚è¡¨ç¤º
  - ç®¡ç†ç”»é¢ã§è¿½åŠ ã—ãŸã‚«ãƒ†ã‚´ãƒªãŒå³åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«æ”¹å–„

```typescript
// MenuScreen.tsx
const [categories, setCategories] = useState<Category[]>([]);

useEffect(() => {
  const fetchData = async () => {
    const [productsData, categoriesData] = await Promise.all([
      getStoreProducts(storeId),
      getAllCategories(),
    ]);
    setProducts(productsData || []);
    setCategories(categoriesData || []);
  };
  fetchData();
}, [storeId]);
```

---

## ğŸ”Œ APIä»•æ§˜

### é¡§å®¢å‘ã‘API

#### `POST /login/store`
åº—èˆ—ãƒ­ã‚°ã‚¤ãƒ³

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "store_id": 1,
  "password": "password123"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "status": "success",
  "store_info": {
    "id": 1,
    "name": "æ–°å®¿æœ¬åº—",
    "prefecture": "æ±äº¬éƒ½",
    "municipality": "æ–°å®¿åŒº"
  }
}
```

#### `POST /customer-attributes`
é¡§å®¢å±æ€§ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "store_id": 1,
  "age_group": "20ä»£",
  "gender": "ç”·æ€§"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "attribute_id": 1,
  "store_id": 1,
  "age_group": "20ä»£",
  "gender": "ç”·æ€§",
  "scanned_at": "2025-12-28T12:34:56"
}
```

#### `GET /stores/{store_id}/products`
è²©å£²ä¸­ã®å•†å“ä¸€è¦§ã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
[
  {
    "product_id": 1,
    "product_name": "ãƒãƒ³ãƒãƒ¼ã‚°å®šé£Ÿ",
    "category_name": "å®šé£Ÿ",
    "price": 850,
    "stock":  50,
    "image_url":  "/images/hamburg.jpg"
  }
]
```

#### `POST /orders`
æ³¨æ–‡ã‚’ç¢ºå®š

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "store_id": 1,
  "attribute_id": 1,
  "items": [
    {
      "product_id": 1,
      "quantity": 2,
      "unit_price": 850
    }
  ],
  "total_amount": 1700,
  "payment_method": "ç¾é‡‘",
  "take_out_type": "åº—å†…"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "status": "success",
  "order_id": 1
}
```

### ç®¡ç†ç”»é¢API

#### ã‚«ãƒ†ã‚´ãƒªç®¡ç†

**`GET /admin/categories`** - ã‚«ãƒ†ã‚´ãƒªä¸€è¦§å–å¾—

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
[
  {
    "category_id": 1,
    "category_name": "å®šé£Ÿ"
  }
]
```

**`POST /admin/categories`** - ã‚«ãƒ†ã‚´ãƒªè¿½åŠ 

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "category_name": "ãƒ‰ãƒªãƒ³ã‚¯"
}
```

**`PUT /admin/categories/{category_id}`** - ã‚«ãƒ†ã‚´ãƒªæ›´æ–°

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 
```json
{
  "category_name": "ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯"
}
```

**`DELETE /admin/categories/{category_id}`** - ã‚«ãƒ†ã‚´ãƒªå‰Šé™¤

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "status": "success",
  "message": "ã‚«ãƒ†ã‚´ãƒªã‚’å‰Šé™¤ã—ã¾ã—ãŸ"
}
```

#### å•†å“ç®¡ç†

**`GET /admin/products`** - å•†å“ä¸€è¦§å–å¾—

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: 
- `category_id` (optional): ã‚«ãƒ†ã‚´ãƒªIDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
[
  {
    "product_id": 1,
    "product_name": "ãƒãƒ³ãƒãƒ¼ã‚°å®šé£Ÿ",
    "category_id": 1,
    "category_name": "å®šé£Ÿ",
    "standard_price": 850,
    "image_url": "/images/hamburg. jpg",
    "stock": 50,
    "is_on_sale": true
  }
]
```

**`POST /admin/products`** - å•†å“è¿½åŠ 

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "product_name": "ã‚³ãƒ¼ãƒ©",
  "category_id":  2,
  "standard_price": 350,
  "image_url": "/images/cola. jpg",
  "initial_stock": 99
}
```

**`PUT /admin/products/{product_id}`** - å•†å“æ›´æ–°

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: 
```json
{
  "product_name": "ã‚³ã‚«ã‚³ãƒ¼ãƒ©",
  "standard_price": 300
}
```

**`DELETE /admin/products/{product_id}`** - å•†å“å‰Šé™¤

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "status":  "success",
  "message":  "å•†å“ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"
}
```

#### ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**`POST /admin/upload-image`** - å•†å“ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
- Content-Type: `multipart/form-data`
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `file` (ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«)

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "status": "success",
  "image_url": "/images/1735380123_product. jpg"
}
```

è©³ç´°ã¯ `http://127.0.0.1:8000/docs` ã®Swagger UIã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### prefecturesï¼ˆéƒ½é“åºœçœŒï¼‰
```sql
CREATE TABLE prefectures (
    prefecture_id INTEGER PRIMARY KEY,
    prefecture_name VARCHAR(10) NOT NULL
);
```

#### municipalitiesï¼ˆå¸‚ç”ºæ‘ï¼‰
```sql
CREATE TABLE municipalities (
    municipality_id INTEGER PRIMARY KEY,
    prefecture_id INTEGER NOT NULL,
    municipality_name VARCHAR(50) NOT NULL,
    FOREIGN KEY (prefecture_id) REFERENCES prefectures(prefecture_id)
);
```

#### storesï¼ˆåº—èˆ—ï¼‰
```sql
CREATE TABLE stores (
    store_id INTEGER PRIMARY KEY AUTOINCREMENT,
    municipality_id INTEGER NOT NULL,
    store_name VARCHAR(100) NOT NULL,
    address_detail VARCHAR(200),
    password_hash VARCHAR(255) NOT NULL,
    FOREIGN KEY (municipality_id) REFERENCES municipalities(municipality_id)
);
```

#### categoriesï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰
```sql
CREATE TABLE categories (
    category_id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_name VARCHAR(50) NOT NULL UNIQUE
);
```

#### productsï¼ˆå•†å“ï¼‰
```sql
CREATE TABLE products (
    product_id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_id INTEGER NOT NULL,
    product_name VARCHAR(100) NOT NULL,
    standard_price INTEGER NOT NULL,
    image_url VARCHAR(255),
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
);
```

#### store_inventoriesï¼ˆåº—èˆ—åœ¨åº«ï¼‰
```sql
CREATE TABLE store_inventories (
    inventory_id INTEGER PRIMARY KEY AUTOINCREMENT,
    store_id INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    current_stock INTEGER NOT NULL DEFAULT 0,
    is_on_sale BOOLEAN NOT NULL DEFAULT TRUE,
    FOREIGN KEY (store_id) REFERENCES stores(store_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
```

#### customer_attributesï¼ˆé¡§å®¢å±æ€§ï¼‰
```sql
CREATE TABLE customer_attributes (
    attribute_id INTEGER PRIMARY KEY AUTOINCREMENT,
    store_id INTEGER NOT NULL,
    age_group VARCHAR(20),
    gender VARCHAR(10),
    scanned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (store_id) REFERENCES stores(store_id)
);
```

#### ordersï¼ˆæ³¨æ–‡ï¼‰
```sql
CREATE TABLE orders (
    order_id INTEGER PRIMARY KEY AUTOINCREMENT,
    store_id INTEGER NOT NULL,
    attribute_id INTEGER,
    total_amount INTEGER NOT NULL,
    payment_method VARCHAR(20),
    take_out_type VARCHAR(20),
    ordered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (store_id) REFERENCES stores(store_id),
    FOREIGN KEY (attribute_id) REFERENCES customer_attributes(attribute_id)
);
```

#### order_detailsï¼ˆæ³¨æ–‡æ˜ç´°ï¼‰
```sql
CREATE TABLE order_details (
    detail_id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    quantity INTEGER NOT NULL,
    unit_price INTEGER NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
```

ERå›³ã«ã¤ã„ã¦ã¯ `/backend/ERå›³.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ”§ é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
```bash
cd ~/iroiro_application/food_ticket/backend/
uvicorn app.main:app --reload
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
```bash
cd ~/iroiro_application/food_ticket/frontend/
npm run dev
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
```bash
cd ~/iroiro_application/food_ticket/backend/
rm vending_machine.db
python -m scripts.create_db
python -m scripts.seed
```

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆ`scripts/seed.py`ï¼‰ã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š

**åº—èˆ—:**
- ID: 1
- åå‰: æ–°å®¿æœ¬åº—
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password123`

**ã‚«ãƒ†ã‚´ãƒª:**
- å®šé£Ÿï¼ˆID: 1ï¼‰
- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆID: 2ï¼‰
- å˜å“ï¼ˆID: 3ï¼‰

**å•†å“:**
1. ãƒãƒ³ãƒãƒ¼ã‚°å®šé£Ÿï¼ˆå®šé£Ÿã€Â¥850ã€åœ¨åº«50ï¼‰
2. ã‹ã‚‰ã‚ã’å®šé£Ÿï¼ˆå®šé£Ÿã€Â¥750ã€åœ¨åº«30ï¼‰
3. ãƒ•ãƒ©ã‚¤ãƒ‰ãƒãƒ†ãƒˆï¼ˆã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Â¥300ã€åœ¨åº«100ï¼‰
4. ã¨ã‚“ã‹ã¤å®šé£Ÿï¼ˆå®šé£Ÿã€Â¥900ã€åœ¨åº«40ï¼‰

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼:  `Form data requires "python-multipart" to be installed`

**åŸå› :** ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¸è¶³

**è§£æ±ºæ–¹æ³•:**
```bash
cd ~/iroiro_application/food_ticket/backend/
pip install python-multipart
uvicorn app.main:app --reload
```

### ã‚¨ãƒ©ãƒ¼: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã« `FileNotFoundError`

**åŸå› :** ç”»åƒä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„

**è§£æ±ºæ–¹æ³•:**
```bash
cd ~/iroiro_application/food_ticket/frontend/public
mkdir -p images
```

### ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ ã—ã¦ã‚‚æ³¨æ–‡ç”»é¢ã«è¡¨ç¤ºã•ã‚Œãªã„

**åŸå› :** ä»¥å‰ã®å®Ÿè£…ã§ã¯ã€å•†å“ãŒå­˜åœ¨ã™ã‚‹ã‚«ãƒ†ã‚´ãƒªã®ã¿è¡¨ç¤ºã—ã¦ã„ãŸ

**è§£æ±ºæ¸ˆã¿:** MenuScreen.tsxã‚’æ›´æ–°ã—ã€APIã‹ã‚‰å…¨ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´æ¸ˆã¿

### CORS ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

**åŸå› :** ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®CORSè¨­å®š

**è§£æ±ºæ–¹æ³•:** `backend/app/main.py` ã®CORSè¨­å®šã‚’ç¢ºèª
```python
origins = [
    "http://localhost:5173",
    "http://127.0.0.1:5173",
]
```

---

## ğŸ“ ä»Šå¾Œã®é–‹ç™ºäºˆå®š

### å„ªå…ˆåº¦:  é«˜
- [ ] **åœ¨åº«ç®¡ç†ç”»é¢** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åœ¨åº«ç¢ºèªã€è²©å£²ä¸­/åœæ­¢ã®åˆ‡ã‚Šæ›¿ãˆ
  - åº—èˆ—åˆ¥ã®åœ¨åº«ä¸€è¦§è¡¨ç¤º
  - åœ¨åº«ã®å¢—æ¸›æ©Ÿèƒ½
  - è²©å£²çŠ¶æ…‹ã®ä¸€æ‹¬åˆ‡ã‚Šæ›¿ãˆ
  
- [ ] **å£²ä¸Šåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** - æ—¥åˆ¥/æœˆåˆ¥å£²ä¸Šã‚°ãƒ©ãƒ•ã€äººæ°—å•†å“ãƒ©ãƒ³ã‚­ãƒ³ã‚°
  - Chart.jsã‚„Rechartsã‚’ä½¿ã£ãŸå£²ä¸Šã‚°ãƒ©ãƒ•
  - æ™‚é–“å¸¯åˆ¥ã®å£²ä¸Šåˆ†æ
  - é¡§å®¢å±æ€§åˆ¥ã®è³¼å…¥å‚¾å‘

### å„ªå…ˆåº¦: ä¸­
- [ ] **æ³¨æ–‡å±¥æ­´ç”»é¢** - éå»ã®æ³¨æ–‡ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º
  - æ—¥ä»˜ç¯„å›²ã§ã®çµã‚Šè¾¼ã¿
  - æ³¨æ–‡è©³ç´°ã®è¡¨ç¤º
  - æ³¨æ–‡ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½
  
- [ ] **åº—èˆ—ç®¡ç†** - è¤‡æ•°åº—èˆ—ã®ç®¡ç†ã€åº—èˆ—æƒ…å ±ç·¨é›†
  - åº—èˆ—ä¸€è¦§è¡¨ç¤º
  - åº—èˆ—æƒ…å ±ã®ç·¨é›†
  - åº—èˆ—ã”ã¨ã®è¨­å®š
  
- [ ] **ç®¡ç†ç”»é¢èªè¨¼** - ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆåŒ–ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ç®¡ç†
  - ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
  - ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

### å„ªå…ˆåº¦: ä½
- [ ] **é€šçŸ¥æ©Ÿèƒ½** - åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆã€æ³¨æ–‡å®Œäº†é€šçŸ¥
  - Webãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
  - ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
  - Slacké€£æº
  
- [ ] **ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›** - å£²ä¸Šãƒ¬ãƒãƒ¼ãƒˆã®PDF/CSVå‡ºåŠ›
  - æ—¥æ¬¡/æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
  - CSV/Excelå‡ºåŠ›
  - PDFå¸³ç¥¨å‡ºåŠ›
  
- [ ] **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–** - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®æ”¹å–„
  - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å‘ã‘UI
  - ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ
  - PWAåŒ–

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

### ã‚³ãƒŸãƒƒãƒˆè¦ç´„

```
feat: æ–°æ©Ÿèƒ½
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
chore: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚„è£œåŠ©ãƒ„ãƒ¼ãƒ«ã®å¤‰æ›´
```

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ‘¤ ä½œæˆè€…

[@nununuma-sabu](https://github.com/nununuma-sabu)

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [React Documentation](https://react.dev/)
- [SQLAlchemy Documentation](https://docs.sqlalchemy.org/)
- [Tailwind CSS Documentation](https://tailwindcss.com/)
- [Vite Documentation](https://vitejs.dev/)
